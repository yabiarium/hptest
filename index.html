<head>
  <title>オート文字列カウンター</title>
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <style>
      body {
          text-align: center; /* テキストを中央揃えにする */
      }
      #text_area {
          font-size: 20px;
          width: 600px;
          height: 400px;
          padding: 10px;
          margin: 0 auto; /* 中央に配置する */
      }
      #line_count_display, #length_display, #length_display_no_spaces {
          font-size: 24px;
          margin: 10px 0;
      }
  </style>
</head>

<body>
  <!-- ここからPyScript -->
  <py-script>
      from js import document

      # 入力の度に呼び出す関数
      def update_counts():
          text_input = document.getElementById('text_area').value

          # 空白ありの文字数を取得
          length_with_spaces = len(text_input.replace("\n", ""))

          # 空白なしの文字数を取得
          length_without_spaces = len(text_input.replace(" ", "").replace("\n", ""))
          
          # 行数の取得
          lines = text_input.split("\n")
          line_count = len(lines)
          
          # 要素を取得して，内容を更新
          document.getElementById('length_display').innerText =           f"文字数（空白含む）　　： {length_with_spaces}"
          document.getElementById('length_display_no_spaces').innerText = f"文字数（空白含まない）： {length_without_spaces}"
          document.getElementById('line_count_display').innerText =       f"行数　　　　　　　　　： {line_count}"
  </py-script>

  <!-- py-inputで，入力の度に呼び出す関数を指定する． --> 
  <textarea id="text_area" py-input="update_counts()"></textarea>

  <!-- 初期値はすべて0 --> 
  <p id="length_display">文字数（空白含む）　　： 0</p>
  <p id="length_display_no_spaces">文字数（空白含まない）： 0</p>
  <p id="line_count_display">行数　　　　　　　　　：  0</p>

    <h3>yabiarium's test page</h3>
    <p>HTMLで書いてみる。</p>
    <b>ボールド</b>
    <u>アンダーライン</u>
    <strike>打ち消し線</strike>

</body>

